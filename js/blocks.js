// koffee 0.42.0
var Syntax, blocked, blocks, chai, chunked, klog, kstr, lines, noon, ranged, ref, slash, spaced, text;

ref = require('kxk'), slash = ref.slash, kstr = ref.kstr, klog = ref.klog, noon = ref.noon, chai = ref.chai;

if (koffee_4_0 = process.hrtime()) {
    Syntax = require('./syntax');
    Syntax.init();
    Syntax.swtch = {
        koffee: {
            'â–¸': {
                to: 'md',
                w0: 'doc',
                indent: 1
            }
        },
        md: {
            '```': {
                to: 'koffee',
                w0: 'coffeescript',
                end: '```'
            }
        }
    };
    text = slash.readText(__dirname + "/test.coffee");
    lines = text.split('\n');
    console.log('-----', require('pretty-time')(process.hrtime(koffee_4_0)));
};

chunked = function(lines, ext) {
    var lineno, word;
''
    word = function(w) {
        var ref1;
        return (ref1 = Syntax.lang[ext][w]) != null ? ref1 : 'text';
    };
    lineno = 0;
    return lines.map(function(text) {
        var c, chunks, i, l, last, len, line, m, pl, punct, re, rl, s, sc, w, wl;
        line = {
            chunks: [],
            chars: 0,
            index: lineno++,
            number: lineno,
            ext: ext
        };
        chunks = text.split(/\s/);
        if (chunks.length === 1 && chunks[0] === '') {
            return line;
        }
        c = 0;
        for (i = 0, len = chunks.length; i < len; i++) {
            s = chunks[i];
            if (s === '') {
                c++;
            } else {
                if (line.chunks.length) {
                    c++;
                }
                l = s.length;
                sc = c;
                re = /\W+/gi;
                while (m = re.exec(s)) {
                    if (m.index > 0) {
                        wl = m.index - (c - sc);
                        w = s.slice(c - sc, m.index);
                        line.chunks.push({
                            string: w,
                            column: c,
                            length: wl,
                            value: word(w)
                        });
                        c += wl;
                    }
                    punct = m[0];
                    pl = punct.length;
                    line.chunks.push({
                        string: m[0],
                        column: c,
                        length: pl,
                        value: 'punct'
                    });
                    c += pl;
                }
                if (c < sc + l) {
                    rl = sc + l - c;
                    w = s.slice(l - rl);
                    line.chunks.push({
                        string: w,
                        column: c,
                        length: rl,
                        value: word(w)
                    });
                    c += rl;
                }
            }
        }
        if (line.chunks.length) {
            last = line.chunks.slice(-1)[0];
            line.chars = last.column + last.length;
        }
        return line;
    });
};

blocked = function(lines) {
    var chunk, chunkIndex, extStack, i, j, len, line, mtch, ref1, ref2, ref3, ref4, ref5, top;
''
    extStack = [];
    for (i = 0, len = lines.length; i < len; i++) {
        line = lines[i];
        if (extStack.length) {
            top = extStack.slice(-1)[0];
            if (top["switch"].indent && ((ref1 = line.chunks[0]) != null ? ref1.column : void 0) <= top.start.chunks[0].column) {
                extStack.pop();
                line.ext = top.start.ext;
            } else {
                line.ext = top["switch"].to;
            }
        }
        for (chunkIndex = j = 0, ref2 = line.chunks.length; 0 <= ref2 ? j < ref2 : j > ref2; chunkIndex = 0 <= ref2 ? ++j : --j) {
            chunk = line.chunks[chunkIndex];
            if (chunk.value === 'punct') {
                if (mtch = (ref3 = Syntax.turd[line.ext]) != null ? ref3[chunk.string] : void 0) {
                    if (mtch.turd) {
                        chunk.value += ' ' + mtch.turd;
                    }
                    if (mtch['w-0']) {
                        if ((ref4 = line.chunks[chunkIndex + 1]) != null) {
                            ref4.value = mtch['w-0'];
                        }
                    }
                }
                if (extStack.length) {
                    top = extStack.slice(-1)[0];
                    if (top["switch"].end === chunk.string) {
                        extStack.pop();
                        line.ext = top.start.ext;
                        continue;
                    }
                }
                if (mtch = (ref5 = Syntax.swtch[line.ext]) != null ? ref5[chunk.string] : void 0) {
                    extStack.push({
                        "switch": mtch,
                        start: line
                    });
                }
            }
        }
    }
    return lines;
};

blocks = function(lines, ext) {
    if (ext == null) {
        ext = 'koffee';
    }
''
    return blocked(chunked(lines, ext));
};

ranged = function(lines) {
    var chunk, i, j, len, len1, line, range, ref1, rngs;
''
    rngs = [];
    for (i = 0, len = lines.length; i < len; i++) {
        line = lines[i];
        ref1 = line.chunks;
        for (j = 0, len1 = ref1.length; j < len1; j++) {
            chunk = ref1[j];
            range = {
                start: chunk.column,
                match: chunk.string,
                value: chunk.value.replace('punct', 'punctuation')
            };
            rngs.push(range);
        }
    }
    return rngs;
};

if (koffee_204_0 = process.hrtime()) {
    spaced = ranged(blocks(lines));
    console.log('blocks', require('pretty-time')(process.hrtime(koffee_204_0)));
};

module.exports = {
    ranges: function(textline, ext) {
        return ranged(blocks([textline], ext));
    }
};

;

;

;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmxvY2tzLmpzIiwic291cmNlUm9vdCI6Ii4iLCJzb3VyY2VzIjpbIiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQ0EsSUFBQTs7QUFBQSxNQUFvQyxPQUFBLENBQVEsS0FBUixDQUFwQyxFQUFFLGlCQUFGLEVBQVMsZUFBVCxFQUFlLGVBQWYsRUFBcUIsZUFBckIsRUFBMkI7O0FBQXNCLElBQUEsNkJBQUE7SUFHN0MsTUFBQSxHQUFTLE9BQUEsQ0FBUSxVQUFSO0lBQ1QsTUFBTSxDQUFDLElBQVAsQ0FBQTtJQUVBLE1BQU0sQ0FBQyxLQUFQLEdBQ0k7UUFBQSxNQUFBLEVBQVE7WUFBQSxHQUFBLEVBQVE7Z0JBQUEsRUFBQSxFQUFJLElBQUo7Z0JBQWEsRUFBQSxFQUFHLEtBQWhCO2dCQUErQixNQUFBLEVBQVEsQ0FBdkM7YUFBUjtTQUFSO1FBQ0EsRUFBQSxFQUFRO1lBQUEsS0FBQSxFQUFRO2dCQUFBLEVBQUEsRUFBSSxRQUFKO2dCQUFhLEVBQUEsRUFBRyxjQUFoQjtnQkFBK0IsR0FBQSxFQUFRLEtBQXZDO2FBQVI7U0FEUjs7SUFLSixJQUFBLEdBQU8sS0FBSyxDQUFDLFFBQU4sQ0FBa0IsU0FBRCxHQUFXLGNBQTVCO0lBRVAsS0FBQSxHQUFRLElBQUksQ0FBQyxLQUFMLENBQVcsSUFBWCxFQWRxQzs2RUFBQTs7O0FBc0JqRCxPQUFBLEdBQVUsU0FBQyxLQUFELEVBQVEsR0FBUjtBQUVQLFFBQUE7QUFBQTtJQWtCQyxJQUFBLEdBQU8sU0FBQyxDQUFEO0FBQU8sWUFBQTs2REFBc0I7SUFBN0I7SUFFUCxNQUFBLEdBQVM7V0FDVCxLQUFLLENBQUMsR0FBTixDQUFVLFNBQUMsSUFBRDtBQUVOLFlBQUE7UUFBQSxJQUFBLEdBQ0k7WUFBQSxNQUFBLEVBQVEsRUFBUjtZQUNBLEtBQUEsRUFBUSxDQURSO1lBRUEsS0FBQSxFQUFRLE1BQUEsRUFGUjtZQUdBLE1BQUEsRUFBUSxNQUhSO1lBSUEsR0FBQSxFQUFRLEdBSlI7O1FBTUosTUFBQSxHQUFTLElBQUks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QUFPLEtBQUssQ0FBQyxLQUFLLENBQUMsT0FBWixDQUFvQixPQUFwQixFQUE2QixhQUE3QixDQUZQOztZQUdKLElBQUksQ0FBQyxJQUFMLENBQVUsS0FBVjtBQUxKO0FBREo7V0FPQTtBQXZCSzs7QUF5QlQsSUFBQSwrQkFBQTtJQUVJLE1BQUEsR0FBUyxNQUFBLENBQU8sTUFBQSxDQUFPLEtBQVAsQ0FBUCxFQUZiO2dGQUFBOzs7QUFVQSxNQUFNLENBQUMsT0FBUCxHQUNJO0lBQUEsTUFBQSxFQUFRLFNBQUMsUUFBRCxFQUFXLEdBQVg7ZUFBbUIsTUFBQSxDQUFPLE1BQUEsQ0FBTyxDQUFDLFFBQUQsQ0FBUCxFQUFtQixHQUFuQixDQUFQO0lBQW5CLENBQVIiLCJzb3VyY2VzQ29udGVudCI6WyJcbnsgc2xhc2gsIGtzdHIsIGtsb2csIG5vb24sIGNoYWkgfSA9IHJlcXVpcmUgJ2t4aydcblxu4pa4cHJvZmlsZSAnLS0tLS0nIFxuICAgIFN5bnRheCA9IHJlcXVpcmUgJy4vc3ludGF4J1xuICAgIFN5bnRheC5pbml0KClcbiAgICBcbiAgICBTeW50YXguc3d0Y2ggPSBcbiAgICAgICAga29mZmVlOiAn4pa4JzogICAgdG86ICdtZCcgICAgIHcwOidkb2MnICAgICAgICAgIGluZGVudDogMVxuICAgICAgICBtZDogICAgICdgYGAnOiAgdG86ICdrb2ZmZWUnIHcwOidjb2ZmZWVzY3JpcHQnIGVuZDogICAgJ2BgYCdcblxuICAgICMgdGV4dCA9IHNsYXNoLnJlYWRUZXh0IFwiI3tfX2Rpcm5hbWV9Ly4uLy4uL2tvZmZlZS9jb2ZmZWUvbm9kZXMuY29mZmVlXCIgIyAyMm1zXG4gICAgIyB0ZXh0ID0gc2xhc2gucmVhZFRleHQgXCIje19fZGlybmFtZX0vLi4vLi4va29mZmVlL3Rlc3Qua29mZmVlXCJcbiAgICB0ZXh0ID0gc2xhc2gucmVhZFRleHQgXCIje19fZGlybmFtZX0vdGVzdC5jb2ZmZWVcIiAjIDUwMHVzXG5cbiAgICBsaW5lcyA9IHRleHQuc3BsaXQgJ1xcbidcbiAgICAgICAgXG4jICAwMDAwMDAwICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAgICAwMDAgICAwMDAwMDAwICBcbiMgMDAwICAgICAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAwICAwMDAgIDAwMCAgMDAwICAgMDAwICAgICAgIFxuIyAwMDAgICAgICAgMDAwMDAwMDAwICAwMDAgICAwMDAgIDAwMCAwIDAwMCAgMDAwMDAwMCAgICAwMDAwMDAwICAgXG4jIDAwMCAgICAgICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAwMDAwICAwMDAgIDAwMCAgICAgICAgMDAwICBcbiMgIDAwMDAwMDAgIDAwMCAgIDAwMCAgIDAwMDAwMDAgICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwMDAwMCAgIFxuXG5jaHVua2VkID0gKGxpbmVzLCBleHQpIC0+ICAgIFxuXG4gICAg4pa4ZG9jICdjaHVua2VkICpsaW5lcyosICpleHQqJ1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgIG91dHB1dDogYXJyYXkgb2ZcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY2h1bmtzOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHJpbmc6IHNcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiAgc1xuICAgICAgICAgICAgICAgICAgICAgICAgY29sdW1uOiBuXG4gICAgICAgICAgICAgICAgICAgICAgICBsZW5ndGg6IG5cbiAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgZXh0OiAgICBzXG4gICAgICAgICAgICBjaGFyczogIG5cbiAgICAgICAgICAgIGluZGV4OiAgblxuICAgICAgICAgICAgbnVtYmVyOiBuKzFcbiAgICBcbiAgICB3b3JkID0gKHcpIC0+IFN5bnRheC5sYW5nW2V4dF1bd10gPyAndGV4dCdcbiAgICBcbiAgICBsaW5lbm8gPSAwXG4gICAgbGluZXMubWFwICh0ZXh0KSAtPiBcbiAgICAgICAgXG4gICAgICAgIGxpbmUgPSBcbiAgICAgICAgICAgIGNodW5rczogW11cbiAgICAgICAgICAgIGNoYXJzOiAgMFxuICAgICAgICAgICAgaW5kZXg6ICBsaW5lbm8rK1xuICAgICAgICAgICAgbnVtYmVyOiBsaW5lbm9cbiAgICAgICAgICAgIGV4dDogICAgZXh0XG5cbiAgICAgICAgY2h1bmtzID0gdGV4dC5zcGxpdCAvXFxzL1xuICAgICAgICBcbiAgICAgICAgaWYgY2h1bmtzLmxlbmd0aCA9PSAxIGFuZCBjaHVua3NbMF0gPT0gJydcbiAgICAgICAgICAgIHJldHVybiBsaW5lICMgZW1wdHkgbGluZVxuICAgICAgICAgICAgXG4gICAgICAgIGMgPSAwXG4gICAgICAgIGZvciBzIGluIGNodW5rc1xuICAgICAgICAgICAgaWYgcyA9PSAnJ1xuICAgICAgICAgICAgICAgIGMrK1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIGlmIGxpbmUuY2h1bmtzLmxlbmd0aCB0aGVuIGMrK1xuICAgICAgICAgICAgICAgIGwgPSBzLmxlbmd0aFxuICAgICAgICAgICAgICAgIHNjID0gY1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICMgc2VwZXJhdGUgYnkgcHVuY3R1YXRpb25cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICByZSA9IC9cXFcrL2dpXG4gICAgICAgICAgICAgICAgd2hpbGUgbSA9IHJlLmV4ZWMgc1xuICAgICAgICAgICAgICAgICAgICBpZiBtLmluZGV4ID4gMFxuICAgICAgICAgICAgICAgICAgICAgICAgd2wgPSBtLmluZGV4LShjLXNjKVxuICAgICAgICAgICAgICAgICAgICAgICAgdyA9IHNbYy1zYy4uLm0uaW5kZXhdXG4gICAgICAgICAgICAgICAgICAgICAgICBsaW5lLmNodW5rcy5wdXNoIHN0cmluZzp3LCBjb2x1bW46YywgbGVuZ3RoOndsLCB2YWx1ZTp3b3JkIHcgXG4gICAgICAgICAgICAgICAgICAgICAgICBjICs9IHdsXG4gICAgICAgICAgICAgICAgICAgIHB1bmN0ID0gbVswXVxuICAgICAgICAgICAgICAgICAgICBwbCA9IHB1bmN0Lmxlbmd0aFxuICAgICAgICAgICAgICAgICAgICBsaW5lLmNodW5rcy5wdXNoIHN0cmluZzptWzBdLCBjb2x1bW46YywgbGVuZ3RoOnBsLCB2YWx1ZToncHVuY3QnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGMgKz0gcGxcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiBjIDwgc2MrbCAgICAgICAgIyBjaGVjayBmb3IgcmVtYWluaW5nIG5vbi1wdW5jdFxuICAgICAgICAgICAgICAgICAgICBybCA9IHNjK2wtYyAgICAjIGxlbmd0aCBvZiByZW1haW5kZXJcbiAgICAgICAgICAgICAgICAgICAgdyA9IHNbbC1ybC4uXSAgIyB0ZXh0ICAgb2YgcmVtYWluZGVyIFxuICAgICAgICAgICAgICAgICAgICBsaW5lLmNodW5rcy5wdXNoIHN0cmluZzp3LCBjb2x1bW46YywgbGVuZ3RoOnJsLCB2YWx1ZTp3b3JkIHdcbiAgICAgICAgICAgICAgICAgICAgYyArPSBybFxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgaWYgbGluZS5jaHVua3MubGVuZ3RoXG4gICAgICAgICAgICBsYXN0ID0gbGluZS5jaHVua3NbLTFdXG4gICAgICAgICAgICBsaW5lLmNoYXJzID0gbGFzdC5jb2x1bW4gKyBsYXN0Lmxlbmd0aFxuICAgICAgICAgICAgXG4gICAgICAgIGxpbmVcblxuIyAwMDAwMDAwICAgIDAwMCAgICAgICAwMDAwMDAwICAgIDAwMDAwMDAgIDAwMCAgIDAwMCAgIDAwMDAwMDAgIFxuIyAwMDAgICAwMDAgIDAwMCAgICAgIDAwMCAgIDAwMCAgMDAwICAgICAgIDAwMCAgMDAwICAgMDAwICAgICAgIFxuIyAwMDAwMDAwICAgIDAwMCAgICAgIDAwMCAgIDAwMCAgMDAwICAgICAgIDAwMDAwMDAgICAgMDAwMDAwMCAgIFxuIyAwMDAgICAwMDAgIDAwMCAgICAgIDAwMCAgIDAwMCAgMDAwICAgICAgIDAwMCAgMDAwICAgICAgICAwMDAgIFxuIyAwMDAwMDAwICAgIDAwMDAwMDAgICAwMDAwMDAwICAgIDAwMDAwMDAgIDAwMCAgIDAwMCAgMDAwMDAwMCAgIFxuICAgIFxuYmxvY2tlZCA9IChsaW5lcykgLT5cbiAgICBcbiAgICDilrhkb2MgJ2Jsb2NrZWQgKmxpbmVzKidcbiAgICAgICAgXG4gICAgICAgIGxpbmVzOiAgYXJyYXkgb2YgY2h1bmtlZCBsaW5lc1xuICAgICAgICBcbiAgICAgICAgb3V0cHV0OiBsaW5lcyB3aXRoIFxuICAgICAgICAtICdleHQnIHN3aXRjaGVkIGluIHNvbWUgbGluZXNcbiAgICAgICAgLSAndmFsdWUnIGNoYW5nZWQgaW4gY2h1bmtzIHRoYXQgbWF0Y2ggdHVyZCBwYXR0ZXJuLCBlLmcuIOKWuGRvY1xuICAgICAgICAgICAgXG4gICAgZXh0U3RhY2sgPSBbXVxuICAgIFxuICAgIGZvciBsaW5lIGluIGxpbmVzXG4gICAgICAgIFxuICAgICAgICBpZiBleHRTdGFjay5sZW5ndGhcbiAgICAgICAgICAgIHRvcCA9IGV4dFN0YWNrWy0xXVxuICAgICAgICAgICAgaWYgdG9wLnN3aXRjaC5pbmRlbnQgYW5kIGxpbmUuY2h1bmtzWzBdPy5jb2x1bW4gPD0gdG9wLnN0YXJ0LmNodW5rc1swXS5jb2x1bW5cbiAgICAgICAgICAgICAgICBleHRTdGFjay5wb3AoKVxuICAgICAgICAgICAgICAgIGxpbmUuZXh0ID0gdG9wLnN0YXJ0LmV4dFxuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIGxpbmUuZXh0ID0gdG9wLnN3aXRjaC50b1xuICAgICAgICBcbiAgICAgICAgZm9yIGNodW5rSW5kZXggaW4gWzAuLi5saW5lLmNodW5rcy5sZW5ndGhdXG4gICAgICAgICAgICBjaHVuayA9IGxpbmUuY2h1bmtzW2NodW5rSW5kZXhdXG4gICAgICAgICAgICBpZiBjaHVuay52YWx1ZSA9PSAncHVuY3QnIFxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmIG10Y2ggPSBTeW50YXgudHVyZFtsaW5lLmV4dF0/W2NodW5rLnN0cmluZ11cbiAgICAgICAgICAgICAgICAgICAgY2h1bmsudmFsdWUgKz0gJyAnICsgbXRjaC50dXJkIGlmIG10Y2gudHVyZFxuICAgICAgICAgICAgICAgICAgICBsaW5lLmNodW5rc1tjaHVua0luZGV4KzFdPy52YWx1ZSA9IG10Y2hbJ3ctMCddIGlmIG10Y2hbJ3ctMCddXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiBleHRTdGFjay5sZW5ndGhcbiAgICAgICAgICAgICAgICAgICAgdG9wID0gZXh0U3RhY2tbLTFdXG4gICAgICAgICAgICAgICAgICAgIGlmIHRvcC5zd2l0Y2guZW5kID09IGNodW5rLnN0cmluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgZXh0U3RhY2sucG9wKClcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpbmUuZXh0ID0gdG9wLnN0YXJ0LmV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWVcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmIG10Y2ggPSBTeW50YXguc3d0Y2hbbGluZS5leHRdP1tjaHVuay5zdHJpbmddXG4gICAgICAgICAgICAgICAgICAgIGV4dFN0YWNrLnB1c2ggc3dpdGNoOm10Y2gsIHN0YXJ0OmxpbmVcbiAgICBsaW5lc1xuXG5ibG9ja3MgPSAobGluZXMsIGV4dD0na29mZmVlJykgLT5cbiAgICBcbiAgICDilrhkb2MgJ2Jsb2NrcyAqbGluZXMqLCAqZXh0KidcblxuICAgICAgICBsaW5lczogIGFycmF5IG9mIHN0cmluZ3NcbiAgICAgICAgXG4gICAgICAgIGV4dDogICAgXG4gICAgICAgIC0ga29mZmVlIGNvZmZlZSBqcyB0cyBcbiAgICAgICAgLSBzdHlsIGNzcyBzYXNzIHNjc3MgXG4gICAgICAgIC0gcHVnIGh0bWwgaHRtIHN2ZyBcbiAgICAgICAgLSBjcHAgaHBwIGN4eCBjIGggXG4gICAgICAgIC0gYmFzaCBmaXNoIHNoIFxuICAgICAgICAtIG5vb24ganNvblxuICAgICAgICAtIG1kIHBsaXN0IFxuICAgICAgICAtIGlzcyBpbmlcbiAgICAgICAgLSB0eHQgbG9nIFxuICAgIFxuICAgICAgICB0aGUgcmVzdWx0IG9mXG4gICAgICAgIGJsb2NrZWQgY2h1bmtlZCBsaW5lc1xuICAgICAgICBcbiAgICBcbiAgICBibG9ja2VkIGNodW5rZWQgbGluZXMsIGV4dFxuICAgIFxuIyAwMDAwMDAwMCAgICAwMDAwMDAwICAgMDAwICAgMDAwICAgMDAwMDAwMCAgIDAwMDAwMDAwICAgMDAwMDAwMCAgXG4jIDAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAwICAwMDAgIDAwMCAgICAgICAgMDAwICAgICAgIDAwMCAgICAgICBcbiMgMDAwMDAwMCAgICAwMDAwMDAwMDAgIDAwMCAwIDAwMCAgMDAwICAwMDAwICAwMDAwMDAwICAgMDAwMDAwMCAgIFxuIyAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAwMDAwICAwMDAgICAwMDAgIDAwMCAgICAgICAgICAgIDAwMCAgXG4jIDAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAgICAwMDAgICAwMDAwMDAwICAgMDAwMDAwMDAgIDAwMDAwMDAgICBcblxucmFuZ2VkID0gKGxpbmVzKSAtPlxuICAgIFxuICAgIOKWuGRvYyAncmFuZ2VkICpsaW5lcyonXG4gICAgICAgIFxuICAgICAgICBsaW5lczogIGFycmF5IG9mIGNodW5rZWQgbGluZXNcbiAgICAgICAgXG4gICAgICAgIG91dHB1dDogYXJyYXkgb2ZcblxuICAgICAgICAgICAgc3RhcnQ6IG5cbiAgICAgICAgICAgIG1hdGNoOiBzXG4gICAgICAgICAgICB2YWx1ZTogc1xuICAgICAgICBcbiAgICBybmdzID0gW11cbiAgICBmb3IgbGluZSBpbiBsaW5lc1xuICAgICAgICBmb3IgY2h1bmsgaW4gbGluZS5jaHVua3NcbiAgICAgICAgICAgIHJhbmdlID1cbiAgICAgICAgICAgICAgICBzdGFydDogY2h1bmsuY29sdW1uXG4gICAgICAgICAgICAgICAgbWF0Y2g6IGNodW5rLnN0cmluZ1xuICAgICAgICAgICAgICAgIHZhbHVlOiBjaHVuay52YWx1ZS5yZXBsYWNlICdwdW5jdCcsICdwdW5jdHVhdGlvbidcbiAgICAgICAgICAgIHJuZ3MucHVzaCByYW5nZVxuICAgIHJuZ3NcbiAgICBcbuKWuHByb2ZpbGUgJ2Jsb2NrcydcblxuICAgIHNwYWNlZCA9IHJhbmdlZCBibG9ja3MgbGluZXNcblxuIyBrbG9nIHNwYWNlZFxuICAgIFxuIyDilrhwcm9maWxlICdzeW50YXgxJ1xuXG4gICAgIyByYW5nZXMgPSBsaW5lcy5tYXAgKGwpIC0+IFN5bnRheC5yYW5nZXMgbCwgJ2tvZmZlZSdcblxubW9kdWxlLmV4cG9ydHMgPVxuICAgIHJhbmdlczogKHRleHRsaW5lLCBleHQpIC0+IHJhbmdlZCBibG9ja3MgW3RleHRsaW5lXSwgZXh0XG4gICAgXG4jIDAwMDAwMDAwMCAgMDAwMDAwMDAgICAwMDAwMDAwICAwMDAwMDAwMDAgIFxuIyAgICAwMDAgICAgIDAwMCAgICAgICAwMDAgICAgICAgICAgMDAwICAgICBcbiMgICAgMDAwICAgICAwMDAwMDAwICAgMDAwMDAwMCAgICAgIDAwMCAgICAgXG4jICAgIDAwMCAgICAgMDAwICAgICAgICAgICAgMDAwICAgICAwMDAgICAgIFxuIyAgICAwMDAgICAgIDAwMDAwMDAwICAwMDAwMDAwICAgICAgMDAwICAgICBcblxu4pa4dGVzdCAnbWluaW1hbCdcbiAgICAgICAgICAgICAgICBcbiAgICBibG9ja3MoWycxJ10pLnNob3VsZC5lcWwgW2V4dDona29mZmVlJyBjaGFyczoxIGluZGV4OjAgbnVtYmVyOjEgY2h1bmtzOlsge2NvbHVtbjowLCBsZW5ndGg6MSwgc3RyaW5nOicxJywgdmFsdWU6J3RleHQnfSBdXVxuICAgIGJsb2NrcyhbJ2EnXSkuc2hvdWxkLmVxbCBbZXh0Oidrb2ZmZWUnIGNoYXJzOjEgaW5kZXg6MCBudW1iZXI6MSBjaHVua3M6WyB7Y29sdW1uOjAsIGxlbmd0aDoxLCBzdHJpbmc6J2EnLCB2YWx1ZTondGV4dCd9IF1dXG4gICAgYmxvY2tzKFsnLiddKS5zaG91bGQuZXFsIFtleHQ6J2tvZmZlZScgY2hhcnM6MSBpbmRleDowIG51bWJlcjoxIGNodW5rczpbIHtjb2x1bW46MCwgbGVuZ3RoOjEsIHN0cmluZzonLicsIHZhbHVlOidwdW5jdCd9IF1dXG5cbiAgICBibG9ja3MoWycxLmEnXSkuc2hvdWxkLmVxbCBbZXh0Oidrb2ZmZWUnIGNoYXJzOjMgaW5kZXg6MCBudW1iZXI6MSBjaHVua3M6WyBcbiAgICAgICAgICAgICAgICAge2NvbHVtbjowICBsZW5ndGg6MSBzdHJpbmc6JzEnICAgICB2YWx1ZTondGV4dCd9IFxuICAgICAgICAgICAgICAgICB7Y29sdW1uOjEgIGxlbmd0aDoxIHN0cmluZzonLicgICAgIHZhbHVlOidwdW5jdCd9IFxuICAgICAgICAgICAgICAgICB7Y29sdW1uOjIgIGxlbmd0aDoxIHN0cmluZzonYScgICAgIHZhbHVlOid0ZXh0J30gXG4gICAgICAgICAgICAgICAgIF1dXG4gICAgICAgICAgICAgICAgIFxuICAgIGJsb2NrcyhbJysrYSddKS5zaG91bGQuZXFsIFtleHQ6J2tvZmZlZScgY2hhcnM6MyBpbmRleDowIG51bWJlcjoxIGNodW5rczpbIFxuICAgICAgICAgICAgICAgICB7Y29sdW1uOjAgIGxlbmd0aDoyIHN0cmluZzonKysnICAgIHZhbHVlOidwdW5jdCd9IFxuICAgICAgICAgICAgICAgICB7Y29sdW1uOjIgIGxlbmd0aDoxIHN0cmluZzonYScgICAgIHZhbHVlOid0ZXh0J30gXG4gICAgICAgICAgICAgICAgIF1dXG4gICAgICAgICAgICAgICAgIFxuICAgIGJsb2NrcyhbXCLilrhkb2MgJ2hlbGxvJ1wiXSkuc2hvdWxkLmVxbCBbZXh0Oidrb2ZmZWUnIGNoYXJzOjEyIGluZGV4OjAgbnVtYmVyOjEgY2h1bmtzOlsgXG4gICAgICAgICAgICAgICAgICB7Y29sdW1uOjAgIGxlbmd0aDoxIHN0cmluZzon4pa4JyAgICAgdmFsdWU6J3B1bmN0IG1ldGEnfSBcbiAgICAgICAgICAgICAgICAgIHtjb2x1bW46MSAgbGVuZ3RoOjMgc3RyaW5nOidkb2MnICAgdmFsdWU6J21ldGEnfSBcbiAgICAgICAgICAgICAgICAgIHtjb2x1bW46NSAgbGVuZ3RoOjEgc3RyaW5nOlwiJ1wiICAgICB2YWx1ZToncHVuY3QnfSBcbiAgICAgICAgICAgICAgICAgIHtjb2x1bW46NiAgbGVuZ3RoOjUgc3RyaW5nOlwiaGVsbG9cIiB2YWx1ZTondGV4dCd9IFxuICAgICAgICAgICAgICAgICAge2NvbHVtbjoxMSBsZW5ndGg6MSBzdHJpbmc6XCInXCIgICAgIHZhbHVlOidwdW5jdCd9IFxuICAgICAgICAgICAgICAgICAgXV1cbiAgICAgICAgICAgICAgICAgIFxu4pa4dGVzdCAnc3BhY2UnXG5cbiAgICBiID0gYmxvY2tzIFtcInhcIl1cbiAgICBiWzBdLmNodW5rc1swXS5zaG91bGQuaW5jbHVkZS5wcm9wZXJ0eSAnY29sdW1uJyAwXG5cbiAgICBiID0gYmxvY2tzIFtcIiB4eFwiXVxuICAgIGJbMF0uY2h1bmtzWzBdLnNob3VsZC5pbmNsdWRlLnByb3BlcnR5ICdjb2x1bW4nIDFcbiAgICBcbiAgICBiID0gYmxvY2tzIFtcIiAgICB4eHhcIl1cbiAgICBiWzBdLmNodW5rc1swXS5zaG91bGQuaW5jbHVkZS5wcm9wZXJ0eSAnY29sdW1uJyA0XG5cbiAgICBiID0gYmxvY2tzIFtcIiAgICB4IDEgICwgXCJdXG4gICAgYlswXS5jaHVua3NbMF0uc2hvdWxkLmluY2x1ZGUucHJvcGVydHkgJ2NvbHVtbicgNFxuICAgIGJbMF0uY2h1bmtzWzFdLnNob3VsZC5pbmNsdWRlLnByb3BlcnR5ICdjb2x1bW4nIDZcbiAgICBiWzBdLmNodW5rc1syXS5zaG91bGQuaW5jbHVkZS5wcm9wZXJ0eSAnY29sdW1uJyA5XG5cbuKWuHRlc3QgJ21peGVkJ1xuICAgIFxuICAgIGIgPSBibG9ja3MgXCJcIlwiXG4gICAgICAgIOKWuGRvYyAnaGVsbG8nXG4gICAgICAgICAgICB4ICAgIFxuICAgICAgICAgICAgeVxuICAgICAgICAxXCJcIlwiLnNwbGl0ICdcXG4nXG4gICAgYlswXS5zaG91bGQuaW5jbHVkZS5wcm9wZXJ0eSAnZXh0JyAna29mZmVlJ1xuICAgIGJbMV0uc2hvdWxkLmluY2x1ZGUucHJvcGVydHkgJ2V4dCcgJ21kJ1xuICAgIGJbMl0uc2hvdWxkLmluY2x1ZGUucHJvcGVydHkgJ2V4dCcgJ21kJ1xuICAgIGJbM10uc2hvdWxkLmluY2x1ZGUucHJvcGVydHkgJ2V4dCcgJ2tvZmZlZSdcblxuICAgIGIgPSBibG9ja3MgXCJcIlwiXG4gICAgICAgIOKWuGRvYyAnaGVsbG8nXG4gICAgICAgICAgICB4ICBcbiAgICAgICAgICAgIGBgYGNvZmZlZXNjcmlwdFxuICAgICAgICAgICAgICAgIDErMVxuICAgICAgICAgICAgYGBgXG4gICAgICAgICAgICB5XG4gICAgICAgIDFcIlwiXCIuc3BsaXQgJ1xcbidcbiAgICBiWzBdLnNob3VsZC5pbmNsdWRlLnByb3BlcnR5ICdleHQnICdrb2ZmZWUnXG4gICAgYlsxXS5zaG91bGQuaW5jbHVkZS5wcm9wZXJ0eSAnZXh0JyAnbWQnXG4gICAgYlsyXS5zaG91bGQuaW5jbHVkZS5wcm9wZXJ0eSAnZXh0JyAnbWQnXG4gICAgYlszXS5zaG91bGQuaW5jbHVkZS5wcm9wZXJ0eSAnZXh0JyAna29mZmVlJ1xuICAgIGJbNF0uc2hvdWxkLmluY2x1ZGUucHJvcGVydHkgJ2V4dCcgJ21kJ1xuICAgIGJbNV0uc2hvdWxkLmluY2x1ZGUucHJvcGVydHkgJ2V4dCcgJ21kJ1xuICAgIGJbNl0uc2hvdWxkLmluY2x1ZGUucHJvcGVydHkgJ2V4dCcgJ2tvZmZlZSdcblxuICAgIGIgPSBibG9ja3MgXCJcIlwiICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAg4pa4ZG9jICdoZWxsbycgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIHggICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICBgYGBjb2ZmZWVzY3JpcHQgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIDErMSAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICDilrhkb2MgJ2FnYWluJyAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgc29tZSAqKmRvY3MqKiAgICAgXG4gICAgICAgICAgICBgYGAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgeSAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgMVwiXCJcIi5zcGxpdCAnXFxuJyAgICAgICAgICAgICAgIFxuICAgIGJbMF0uc2hvdWxkLmluY2x1ZGUucHJvcGVydHkgJ2V4dCcgJ2tvZmZlZSdcbiAgICBiWzFdLnNob3VsZC5pbmNsdWRlLnByb3BlcnR5ICdleHQnICdtZCdcbiAgICBiWzJdLnNob3VsZC5pbmNsdWRlLnByb3BlcnR5ICdleHQnICdtZCdcbiAgICBiWzNdLnNob3VsZC5pbmNsdWRlLnByb3BlcnR5ICdleHQnICdrb2ZmZWUnXG4gICAgYls0XS5zaG91bGQuaW5jbHVkZS5wcm9wZXJ0eSAnZXh0JyAna29mZmVlJ1xuICAgIGJbNV0uc2hvdWxkLmluY2x1ZGUucHJvcGVydHkgJ2V4dCcgJ21kJ1xuICAgIGJbNl0uc2hvdWxkLmluY2x1ZGUucHJvcGVydHkgJ2V4dCcgJ21kJ1xuICAgIGJbN10uc2hvdWxkLmluY2x1ZGUucHJvcGVydHkgJ2V4dCcgJ21kJ1xuICAgIGJbOF0uc2hvdWxkLmluY2x1ZGUucHJvcGVydHkgJ2V4dCcgJ2tvZmZlZSdcbiAgICBcbiJdfQ==
//# sourceURL=../coffee/blocks.coffee